<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agenda Manicure</title>
<style>
  body { font-family: Arial, sans-serif; background: #f8f8f8; margin:0; padding:0; }
  header { background: #ff6b81; color: #fff; padding: 20px; text-align: center; }
  h1 { margin:0; font-size: 24px; }
  .container { max-width: 500px; margin: 20px auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1);}
  label { display:block; margin-top:10px; }
  select, input { width: 100%; padding:10px; margin-top:5px; border-radius:5px; border:1px solid #ccc; }
  button { background:#ff6b81; color:#fff; border:none; padding:15px; margin-top:20px; width:100%; border-radius:5px; font-size:16px; cursor:pointer; }
  button:hover { background:#ff4b61; }
  .confirmation { margin-top:20px; padding:15px; background:#d4edda; color:#155724; border-radius:5px; display:none; }
</style>
</head>
<body>

<header>
  <h1>Agende seu horário</h1>
</header>

<div class="container">
  <label for="service">Escolha o serviço:</label>
  <select id="service">
    <option value="">-- Selecione --</option>
    <option value="Manicure">Manicure</option>
    <option value="Pedicure">Pedicure</option>
    <option value="Unhas de Gel">Unhas de Gel</option>
    <option value="Alongamento">Alongamento</option>
  </select>

  <label for="date">Escolha a data:</label>
  <input type="date" id="date" min="<?= new Date().toISOString().split('T')[0] ?>">

  <label for="time">Escolha o horário:</label>
  <select id="time">
    <option value="">-- Selecione a data primeiro --</option>
  </select>

  <label for="name">Nome:</label>
  <input type="text" id="name" placeholder="Seu nome">

  <label for="phone">Telefone (WhatsApp):</label>
  <input type="text" id="phone" placeholder="(XX) XXXXX-XXXX">

  <label for="note">Observação:</label>
  <input type="text" id="note" placeholder="Ex: cor da unha, estilo, etc.">

  <button id="bookBtn">Agendar horário</button>

  <div class="confirmation" id="confirmation"></div>
</div>

<script>
const bookedSlots = {}; // objeto para salvar horários ocupados temporariamente

const timeSelect = document.getElementById('time');
const dateInput = document.getElementById('date');
const serviceSelect = document.getElementById('service');
const bookBtn = document.getElementById('bookBtn');
const confirmationDiv = document.getElementById('confirmation');

const availableTimes = ["09:00", "10:00", "11:00", "13:00", "14:00", "15:00", "16:00"];

dateInput.addEventListener('change', updateTimes);
function updateTimes() {
  timeSelect.innerHTML = '<option value="">-- Selecione --</option>';
  const date = dateInput.value;
  availableTimes.forEach(time => {
    const key = date + "-" + time;
    if (!bookedSlots[key]) {
      const option = document.createElement('option');
      option.value = time;
      option.textContent = time;
      timeSelect.appendChild(option);
    }
  });
}

bookBtn.addEventListener('click', () => {
  const service = serviceSelect.value;
  const date = dateInput.value;
  const time = timeSelect.value;
  const name = document.getElementById('name').value;
  const phone = document.getElementById('phone').value;
  const note = document.getElementById('note').value;

  if (!service || !date || !time || !name || !phone) {
    alert("Preencha todos os campos obrigatórios!");
    return;
  }

  // Salvar horário como ocupado
  const key = date + "-" + time;
  bookedSlots[key] = true;

  // Mostrar confirmação
  confirmationDiv.style.display = 'block';
  confirmationDiv.innerHTML = `✔ Agendamento confirmado para <strong>${name}</strong><br>
  Serviço: ${service}<br>
  Data: ${date}<br>
  Horário: ${time}<br>
  Observação: ${note}<br><br>
  <a href="https://wa.me/55${phone.replace(/\D/g,'')}?text=Olá,%20quero%20confirmar%20meu%20horário%20para%20${service}%20em%20${date}%20às%20${time}" target="_blank">Enviar confirmação pelo WhatsApp</a>`;

  // Limpar campos
  serviceSelect.value = '';
  dateInput.value = '';
  timeSelect.innerHTML = '<option value="">-- Selecione a data primeiro --</option>';
  document.getElementById('name').value = '';
  document.getElementById('phone').value = '';
  document.getElementById('note').value = '';
});
</script>

</body>
</html>
